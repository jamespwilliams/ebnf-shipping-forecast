# ebnf-shipping-forecast

The BBC Shipping Forecast has a [very strict
format](https://en.wikipedia.org/wiki/Shipping_Forecast#Broadcast_format). This
repo contains a specification for Shipping Forecasts in EBNF.

One fun result of this is that [random shipping forecasts can be generated](https://bnfplayground.pauliankline.com/?bnf=%2F*%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FShipping_Forecast%23Broadcast_format%20*%2F%0A%0A%3Cdigit%3E%20%3A%3A%3D%20%5B0-9%5D%0A%0A%3Chour%3E%20%20%20%20%20%20%20%20%3A%3A%3D%20%5B0-1%5D%20%3Cdigit%3E%0A%3Cminute%3E%20%20%20%20%20%20%3A%3A%3D%20%5B0-5%5D%20%3Cdigit%3E%0A%3Ctime%3E%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Chour%3E%20%22%3A%22%20%3Cminute%3E%0A%3Cfuture_time%3E%20%3A%3A%3D%20%3Ctime%3E%20%22%20tomorrow%22%3F%0A%0A%3Ccompass_direction%3E%20%20%20%20%20%20%3A%3A%3D%20%22north%22%20(%22west%22%20%7C%20%22east%22)%20%7C%20%22east%22%20%7C%20%22south%22%20(%22west%22%20%7C%20%22east%22)%20%7C%20%22west%22%0A%3Ccompass_direction_caps%3E%20%3A%3A%3D%20%22North%22%20(%22west%22%20%7C%20%22east%22)%20%7C%20%22East%22%20%7C%20%22South%22%20(%22west%22%20%7C%20%22east%22)%20%7C%20%22West%22%20%0A%0A%3Carea%3E%20%3A%3A%3D%20%22Viking%22%20%7C%20%22North%20Utsire%22%20%7C%20%22South%20Utsire%22%20%7C%20%22Forties%22%20%20%20%20%20%20%7C%20%22Cromarty%22%20%20%7C%20%22Forth%22%20%20%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%22Tyne%22%20%20%20%7C%20%22Dogger%22%20%20%20%20%20%20%20%7C%20%22Fisher%22%20%20%20%20%20%20%20%7C%20%22German%20Bight%22%20%7C%20%22Humber%22%20%20%20%20%7C%20%22Thames%22%20%20%7C%20%22Dover%22%20%20%20%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%22Wight%22%20%20%7C%20%22Portland%22%20%20%20%20%20%7C%20%22Plymouth%22%20%20%20%20%20%7C%20%22Biscay%22%20%20%20%20%20%20%20%7C%20%22Trafalgar%22%20%7C%20%22FitzRoy%22%20%7C%20%22Sole%22%20%20%20%20%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%22Lundy%22%20%20%7C%20%22Fastnet%22%20%20%20%20%20%20%7C%20%22Irish%20Sea%22%20%20%20%20%7C%20%22Shannon%22%20%20%20%20%20%20%7C%20%22Rockall%22%20%20%20%7C%20%22Malin%22%20%20%20%7C%20%22Hebrides%22%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%22Bailey%22%20%7C%20%22Fair%20Isle%22%20%20%20%20%7C%20%22Faeroes%22%20%20%20%20%20%20%7C%20%22Southeast%20Iceland%22%20%0A%0A%3Cintroduction%3E%20%3A%3A%3D%20%22And%20now%20the%20Shipping%20Forecast%2C%20issued%20by%20the%20Met%20Office%20on%20behalf%20%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22of%20the%20Maritime%20and%20Coastguard%20Agency%20at%20%22%20%3Ctime%3E%20%22%20today.%22%0A%0A%3Cat_least_two_comma_separated_areas%3E%20%3A%3A%3D%20%3Carea%3E%20%22%2C%20%22%20%3Carea%3E%20%7C%20%3Carea%3E%20%22%2C%20%22%20%3Cat_least_two_comma_separated_areas%3E%0A%3Carea_list%3E%20%3A%3A%3D%20%3Carea%3E%20%7C%20%3Carea%3E%20%22%20and%20%22%20%3Carea%3E%20%7C%20%3Cat_least_two_comma_separated_areas%3E%20%22%2C%20and%20%22%20%3Carea%3E%0A%0A%3Cgale_warnings%3E%20%3A%3A%3D%20%22There%20are%20warnings%20of%20gales%20in%20%22%20%3Carea_list%3E%20%22.%22%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22There%20are%20warnings%20of%20gales%20in%20all%20areas%20except%20%22%20%3Carea_list%3E%20%22.%22%0A%0A%3Crate_of_change%3E%20%20%20%20%20%20%20%3A%3A%3D%20%22more%20slowly%22%20%7C%20%22slowly%22%20%7C%20%22quickly%22%20%7C%20%22very%20rapidly%22%0A%3Cpressure%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%229%22%20%3Cdigit%3E%20%3Cdigit%3E%0A%3Cpressure_description%3E%20%3A%3A%3D%20%22High%22%20%7C%20%22Medium%22%20%7C%20%22Low%22%0A%3Cpressure_change%3E%20%20%20%20%20%20%3A%3A%3D%20%22deepening%22%20%7C%20%22clearing%22%0A%0A%3Cgeneral_synopsis_pressure_area%3E%20%3A%3A%3D%20%3Ccompass_direction%3E%20%22%20of%20%22%20%3Carea%3E%20%22%20%22%20%3Cpressure%3E%0A%3Cgeneral_synopsis_line%3E%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Cpressure_description%3E%20%22%20%22%20%3Cgeneral_synopsis_pressure_area%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(%22%2C%20%22%20%3Cpressure_change%3E%20%22%20%22%20%3Crate_of_change%3E%20%22%2C%22)%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22%20expected%20%22%20%3Cgeneral_synopsis_pressure_area%3E%20%22%20by%20%22%20%3Cfuture_time%3E%20%22.%22%0A%3Cgeneral_synopsis_body%3E%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Cgeneral_synopsis_line%3E%20%7C%20%3Cgeneral_synopsis_line%3E%20%22%20%22%20%3Cgeneral_synopsis_body%3E%0A%3Cgeneral_synopsis%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%22The%20general%20synopsis%3A%5Cn%5Cn%22%20%3Cgeneral_synopsis_body%3E%0A%0A%3Cprecipitation_modifier%3E%20%3A%3A%3D%20%22Thundery%22%20%7C%20%22Wintry%22%20%7C%20%22Squally%22%20%7C%20%22Occasionally%22%20%7C%20%22Heavy%22%20%7C%20%22Light%22%0A%3Cprecipitation_type%3E%20%20%20%20%20%3A%3A%3D%20%22showers%22%20%7C%20%22rain%22%20%7C%20%22snow%22%0A%3Cprecipitation%3E%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Cprecipitation_modifier%3E%20%22%20%22%20%3Cprecipitation_type%3E%0A%0A%2F*%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FBeaufort_scale%20*%2F%0A%3Cwind_strength%3E%20%20%20%3A%3A%3D%20%5B0-7%5D%20%7C%20%22gale%208%22%20%7C%20%22severe%20gale%209%22%20%7C%20%22storm%2010%22%20%7C%20%22violent%20storm%2011%22%20%7C%20%22hurricane%20force%2012%22%0A%3Cwind_change%3E%20%20%20%20%20%3A%3A%3D%20%22becoming%20cyclonic%22%20%7C%20%22veering%22%20%7C%20%22backing%22%0A%3Cinitial_wind%3E%20%20%20%20%3A%3A%3D%20%3Ccompass_direction_caps%3E%20%22%20%22%20%3Cwind_strength%3E%20(%22%20to%20%22%20%3Cwind_strength%3E)%0A%3Csubsequent_wind%3E%20%3A%3A%3D%20%3Ccompass_direction%3E%20%22%20%22%20%3Cwind_strength%3E%20%22%20later%22%3F%0A%3Cwind%3E%20%20%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Cinitial_wind%3E%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinitial_wind%3E%20%22%2C%20%22%20%3Cwind_change%3E%20%22%20%22%20%3Csubsequent_wind%3E%20(%22%2C%20occasionally%20%22%20%3Csubsequent_wind%3E)%3F%0A%0A%3Cinitial_visibility%3E%20%20%20%20%3A%3A%3D%20%22Good%22%20%7C%20%22Moderate%22%20%7C%20%22Poor%22%20%7C%20%22Very%20poor%22%20%0A%3Csubsequent_visibility%3E%20%3A%3A%3D%20%22good%22%20%7C%20%22moderate%22%20%7C%20%22poor%22%20%7C%20%22very%20poor%22%0A%3Cvisibility%3E%20%20%20%20%20%20%20%20%20%20%20%20%3A%3A%3D%20%3Cinitial_visibility%3E%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinitial_visibility%3E%20%22%20or%20%22%20%3Csubsequent_visibility%3E%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinitial_visibility%3E%20%22%2C%20occasionally%20%22%20%3Csubsequent_visibility%3E%20%22%20later%22%3F%20%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cinitial_visibility%3E%20%22%2C%20becoming%20%22%20%3Csubsequent_visibility%3E%20%22%20later%22%3F%0A%0A%3Cicing%3E%20%3A%3A%3D%20(%22Moderate%22%20%7C%20%22Severe%22)%20%22%20icing%22%0A%0A%3Carea_forecast%3E%20%20%3A%3A%3D%20%3Carea_list%3E%20%22.%20%22%20%3Cwind%3E%20%22.%20%22%20%3Cprecipitation%3E%20%22.%20%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cvisibility%3E%20%22.%22%20(%22%20%22%20%3Cicing%3E%20%22.%22)%3F%0A%3Carea_forecasts%3E%20%3A%3A%3D%20%22The%20area%20forecasts%20for%20the%20next%2024%20hours%3A%5Cn%5Cn%22%20(%3Carea_forecast%3E%20%22%5Cn%22)%2B%0A%0A%3Cforecast%3E%20%3A%3A%3D%20%3Cintroduction%3E%20%22%5Cn%5Cn%22%20%3Cgale_warnings%3E%20%22%5Cn%5Cn%22%20%3Cgeneral_synopsis%3E%20%22%5Cn%5Cn%22%20%3Carea_forecasts%3E%0A&name=) - select "Test against non-terminal" and press "GENERATE RANDOM \<FORECAST\>".

e.g:

```
And now the Shipping Forecast, issued by the Met Office on behalf of the Maritime and Coastguard Agency at 14:23 today.

There are warnings of gales in all areas except German Bight and Irish Sea.

The general synopsis:

Low east of German Bight 964, deepening quickly, expected northwest of Bailey 935 by 17:46 tomorrow. Medium east of Southeast Iceland 991, clearing very rapidly, expected west of Shannon 960 by 00:04.

The area forecasts for the next 24 hours:

Dogger and Fair Isle. East hurricane force 12 to gale 8. Light showers. Very poor, occasionally good.
Trafalgar, German Bight, and Biscay. Southwest storm 10 to hurricane force 12. Heavy snow. Moderate. Moderate icing.
```

Bits which don't make sense (mostly because of the limitations of EBNF):

* Lists of areas, lists of wind strengths, etc. can contain duplicate elements:
   * For example "FitzRoy, FitzRoy and FitzRoy: ..." is possible, but makes no
     sense
* In reality, all areas must be covered in the area forecast - this isn't enforced
* The general synopsis is actually fairly free-form, some synopses won't be covered by this
* In reality, the forecast must be less than 350 words
* There's some duplication I don't like in the EBNF, especially as a result of
  capitalised and uncapitalised terminals - maybe there's a better way to do
  this that I'm missing?
